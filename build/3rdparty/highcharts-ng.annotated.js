"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="highcharts-ng"),function(){"use strict";function t(){var t=[],e=!1,i=!1;return{HIGHCHART:"highcharts.public",HIGHSTOCK:"stock/highstock.public",basePath:function(t){e=t},lazyLoad:function(n){t=void 0===n?[this.HIGHCHART]:n,i=!0},$get:["$window","$rootScope",function(r,a){return e||(e=("https:"===window.location.protocol?"https":"http")+"://code.highcharts.com/"),n(r,a,i,e,t)}]}}function n(t,n,e,i,r){var a=[],o=!1;return{lazyLoad:e,ready:function(i,c){if("undefined"==typeof t.Highcharts&&e){if(a.push([i,c]),o)return;o=!0;var s=this;"undefined"==typeof jQuery&&r.unshift("adapters/standalone-framework.public");var u=function(){if(0===r.length)o=!1,n.$apply(function(){angular.forEach(a,function(t){t[0].apply(t[1],[])})});else{var t=r.shift();s.loadScript(t,u)}};u()}else i()},loadScript:function(t,n){var e=document.createElement("script");e.type="text/javascript",e.src=i+t,e.onload=n,document.getElementsByTagName("body")[0].appendChild(e)},indexOf:function(t,n,e){void 0===e&&(e=0),0>e&&(e+=t.length),0>e&&(e=0);for(var i=t.length;i>e;e++)if(e in t&&t[e]===n)return e;return-1},prependMethod:function(t,n,e){var i=t[n];t[n]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(this,t),i?i.apply(this,t):void 0}},deepExtend:function c(t,n){if(angular.isArray(n)){t=angular.isArray(t)?t:[];for(var e=0;e<n.length;e++)t[e]=c(t[e]||{},n[e])}else if(angular.isObject(n)){t=angular.isObject(t)?t:{};for(var i in n)t[i]=c(t[i]||{},n[i])}else t=n;return t}}}function e(t,n){var e=0,i=function(t){var n=!1;return angular.forEach(t,function(t){angular.isDefined(t.id)||(t.id="series-"+e++,n=!0)}),n},r=["xAxis","yAxis"],a={stock:"StockChart",map:"Map",chart:"Chart"},o=function(e,i,a){var o={},c={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{enabled:!1},xAxis:{events:{}}};return o=a.options?t.deepExtend(c,a.options):c,o.chart.renderTo=i[0],angular.forEach(r,function(i){angular.isDefined(a[i])&&(o[i]=t.deepExtend(o[i]||{},a[i]),(angular.isDefined(a[i].currentMin)||angular.isDefined(a[i].currentMax))&&(t.prependMethod(o.chart.events,"selection",function(t){var n=this;t[i]?e.$apply(function(){e.config[i].currentMin=t[i][0].min,e.config[i].currentMax=t[i][0].max}):e.$apply(function(){e.config[i].currentMin=n[i][0].dataMin,e.config[i].currentMax=n[i][0].dataMax})}),t.prependMethod(o.chart.events,"addSeries",function(t){e.config[i].currentMin=this[i][0].min||e.config[i].currentMin,e.config[i].currentMax=this[i][0].max||e.config[i].currentMax}),t.prependMethod(o[i].events,"setExtremes",function(t){t.trigger&&"zoom"!==t.trigger&&n(function(){e.config[i].currentMin=t.min,e.config[i].currentMax=t.max,e.config[i].min=t.min,e.config[i].max=t.max},0)})))}),a.title&&(o.title=a.title),a.subtitle&&(o.subtitle=a.subtitle),a.credits&&(o.credits=a.credits),a.size&&(a.size.width&&(o.chart.width=a.size.width),a.size.height&&(o.chart.height=a.size.height)),o},c=function(t,n){var e=t.getExtremes();(n.currentMin!==e.dataMin||n.currentMax!==e.dataMax)&&(t.setExtremes?t.setExtremes(n.currentMin,n.currentMax,!1):t.detachedsetExtremes(n.currentMin,n.currentMax,!1))},s=function(t,n,e){(n.currentMin||n.currentMax)&&t[e][0].setExtremes(n.currentMin,n.currentMax,!0)},u=function(n){return angular.extend(t.deepExtend({},n),{data:null,visible:null})},f=function(t){return void 0===t.config?"Chart":a[(""+t.config.chartType).toLowerCase()]||(t.config.useHighStocks?"StockChart":"Chart")},d={restrict:"EAC",replace:!0,template:"<div></div>",scope:{config:"=",disableDataWatch:"="},link:function(e,a,d){var h={},l=function(n){var r,a=[];if(n){var o=i(n);if(o&&!e.disableDataWatch)return!1;if(angular.forEach(n,function(t){a.push(t.id);var n=g.get(t.id);n?angular.equals(h[t.id],u(t))?(void 0!==t.visible&&n.visible!==t.visible&&n.setVisible(t.visible,!1),n.setData(angular.copy(t.data),!1)):n.update(angular.copy(t),!1):g.addSeries(angular.copy(t),!1),h[t.id]=u(t)}),e.config.noData){var c=!1;for(r=0;r<n.length;r++)if(n[r].data&&n[r].data.length>0){c=!0;break}c?g.hideLoading():g.showLoading(e.config.noData)}}for(r=g.series.length-1;r>=0;r--){var s=g.series[r];"highcharts-navigator-series"!==s.options.id&&t.indexOf(a,s.options.id)<0&&s.remove(!1)}return!0},g=!1,p=function(){g&&g.destroy(),h={};var t=e.config||{},n=o(e,a,t),i=t.func||void 0,c=f(e);g=new Highcharts[c](n,i);for(var u=0;u<r.length;u++)t[r[u]]&&s(g,t[r[u]],r[u]);t.loading&&g.showLoading(),t.getHighcharts=function(){return g}};p(),e.disableDataWatch?e.$watchCollection("config.series",function(t,n){l(t),g.redraw()}):e.$watch("config.series",function(t,n){var e=l(t);e&&g.redraw()},!0),e.$watch("config.title",function(t){g.setTitle(t,!0)},!0),e.$watch("config.subtitle",function(t){g.setTitle(!0,t)},!0),e.$watch("config.loading",function(t){t?g.showLoading(t===!0?null:t):g.hideLoading()}),e.$watch("config.noData",function(t){e.config&&e.config.loading&&g.showLoading(t)},!0),e.$watch("config.credits.enabled",function(t){t?g.credits.show():g.credits&&g.credits.hide()}),e.$watch(f,function(t,n){t!==n&&p()}),angular.forEach(r,function(t){e.$watch("config."+t,function(n,e){if(n!==e&&n){if(angular.isArray(n))for(var i=0;i<n.length;i++){var r=n[i];i<g[t].length&&(g[t][i].update(r,!1),c(g[t][i],angular.copy(r)))}else g[t][0].update(n,!1),c(g[t][0],angular.copy(n));g.redraw()}},!0)}),e.$watch("config.options",function(t,n,e){t!==n&&(p(),l(e.config.series),g.redraw())},!0),e.$watch("config.size",function(t,n){t!==n&&t&&g.setSize(t.width||g.chartWidth,t.height||g.chartHeight)},!0),e.$on("highchartsng.reflow",function(){g.reflow()}),e.$on("$destroy",function(){if(g){try{g.destroy()}catch(t){}n(function(){a.remove()},0)}})}};if(t.lazyLoad){var h=d.link;d.link=function(){var n=arguments;t.ready(function(){h.apply(this,n)},this)}}return d}angular.module("highcharts-ng",[]).provider("highchartsNG",t).directive("highchart",["highchartsNG","$timeout",e])}();